@import 'Common/Color.less';
@import '../../../MetricsChart.less';

// **** NOTE: Please make sure to update styles for high contrast as well as dark theme **** //

@metricCaptionMaxWidth: 115px;
@color-axis: #575b60;

/* Tooltip ============================= */
.fxc-monitorchart-tooltip-root {
  position: absolute;
  text-align: center;
  display: none;
  opacity: 0;
  background: lightcoral;
  border-color: darkslategray;
  border-style: solid;
  border-width: 1px;
  z-index: 999;
  float: left;
  pointer-events: none;

  .fxc-monitorchart-tooltip-padding {
    .fxc-monitorchart-tooltip-chrome {
      background: transparent;
      display: block;
      padding: 5px;
      float: left;
    }

    .fxc-monitorchart-tooltip-body {
      display: block;
      padding: 10px;
      float: right;
      background-color: white;
    }
  }
}

.fxc-monitorchart-legend-bar {
  pointer-events: all;
  display: inline-block;
}

/* Axes ================================ */
.fxc-monitorchart-axis {
  shape-rendering: crispEdges;

  .fxc-monitorchart-tick-path,
  .fxc-monitorchart-tick-line,
  .fxc-monitorchart-guideline {
    fill: none;
    stroke: @color-border;
    stroke-width: 1px;
  }

  .fxc-monitorchart-tick-text {
    .fx-text-internal(regular, 10px, auto);

    fill: @color-axis;
  }

  .fxc-monitorchart-minor {
    .fxc-monitorchart-tick-line,
    .fxc-monitorchart-tick-line-nodata {
      stroke: @color-border;
      stroke-width: 1px;
    }
  }
}

.fxc-monitorchart-temp-tick {
  .fx-text-internal(regular, 10px, auto);

  fill: @color-axis;
  text-anchor: middle;
  pointer-events: none;
}

/* Legend ================================ */
.fxs-mode-dark .fxc-monitorchart-legendsContainer {
  fill: white;
}

.fxc-monitorchart-legendsContainer {
  fill: @color-text;

  .fxc-monitorchart-legend {
    display: block;
    width: calc(~'100% - 10px');
    height: inherit;
    opacity: 1;
    -webkit-transition: opacity 2s;
    transition: opacity 2s;

    &.notSelected {
      opacity: 0.3;
    }

    text-align: left;

    .fxc-monitorchart-metric {
      .fx-number-small-adorn();
      .fx-font-semibold();

      display: block;
      max-width: @metricCaptionMaxWidth;
      margin: 3px 0;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .fxc-monitorchart-resource {
      .fx-number-small-adorn();
      .fx-font();

      display: block;
      max-width: @metricCaptionMaxWidth;
      margin: 3px 0;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .fxc-monitorchart-value {
      .fx-font-semibold();

      padding-right: 3px;
      font-size: 20px;
      line-height: 12px;
      letter-spacing: -0.025em;
    }

    .fxc-monitorchart-units {
      .fx-font-semibold();

      font-size: 10px;
      display: inline-block;
      text-align: right;
      vertical-align: bottom;
      overflow: hidden;
    }
  }
}

/* Brush ================================ */
.fxc-monitorchart-brush {
  .fxc-monitorchart-extent {
    stroke: @color-text;
    fill: @color-text;
    fill-opacity: 0.125;
    shape-rendering: crispEdges;
    stroke-width: 2px;
  }

  .fxc-monitorchart-resize {
    .fxc-monitorchart-resize-path,
    .fxc-monitorchart-resize-rect {
      fill: #666;
      fill-opacity: 0.8;
      stroke: @color-text;
      stroke-width: 1.5px;
    }
  }
}

/* accessibility ======================== */
.screenReaderText { // The reason this is visible is because screen readers skip invisible elements.
  position: absolute !important;
  clip: rect(1px, 1px, 1px, 1px); // This makes the element not perceivable on the page. tabindex should also be set to -1
}

/* Fading =============================== */
// Stylign for hover/selection fading
.fxc-monitorchart-lineContainer,
.fxc-monitorchart-bargroup,
.scatterGroup {
  -webkit-transition: opacity 0.5s;
  transition: opacity 0.5s;
  opacity: 1;

  &.notSelected {
    opacity: 0.3;
  }
}

.fxc-monitorchart-lineContainer.Selected {
  .fxc-monitorchart-linePoints-missing,
  .fxc-monitorchart-linePoints {
    -webkit-transition: stroke-width 0.5s;
    transition: stroke-width 0.5s;
    stroke-width: 3px;
  }
}

.scatterGroup {
  .fxc-monitorchart-timeSeriesPoints-dot {
    r: 3.5;
  }

  &.Selected {
    .fxc-monitorchart-timeSeriesPoints-dot {
      -webkit-transition: r 0.5s;
      transition: r 0.5s;
      r: 4.5;
    }
  }
}

/* Pinning Icon ========================= */
.fxc-monitorchart-toolbar-item {
  height: 18px;
  width: 18px;
  padding: 5px;
  float: right;
  display: block;
}

.fxc-monitorchart-toolbar-item-disabled {
  pointer-events: none;
  opacity: 0.5;
}

.fxc-monitorchart-watermark {
  background-color: black;
  opacity: 0.7;
  height: 48px;
  width: 90%;
  display: flex;
  justify-content: center;
  align-items: center;
}

.fxc-monitorchart-watermark-container {
  .fx-text-regular();
  
  display: flex;
  width: 100%;
  height: 100%;
  position: absolute;
  top: 0;
  justify-content: center;
  align-items: center;
}

.fxc-monitorchart-static-threshold {
  stroke: @color-background-dark;
  stroke-width: 1;
  cursor: row-resize;
  pointer-events: all;
  stroke-dasharray: 5, 5;
}

.fxc-monitorchart-static-threshold-pointer {
  fill: @color-background-dark;
  cursor: row-resize;
}

.fxc-monitorchart-watermark-text {
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
  color: white;
  padding-left: 0.8em;
  padding-right: 0.8em;
}

.dark,
.fxs-theme-dark {
  .fxc-monitorchart-legend {
    fill: #fff;
  }

  .fxc-monitorchart-watermark {
    background-color: @color-background-dark;
    opacity: 1;
  }

  .fxc-monitorchart-static-threshold {
    stroke: @color-background-light;
  }

  .fxc-monitorchart-static-threshold-pointer {
    fill: @color-background-light;
  }

  .fxc-monitorchart-minor {
    .fxc-monitorchart-tick-line {
      stroke: #525252;
    }

    .fxc-monitorchart-tick-line-nodata {
      stroke: rgba(82, 82, 82, 0.2);
    }
  }

  .fxc-monitorchart-axis {
    .fxc-monitorchart-tick-path {
      stroke: #aeaeae;
    }

    .fxc-monitorchart-tick-text {
      fill: #aeaeae;
    }
  }

  .fxc-monitorchart-temp-tick {
    fill: #aeaeae;
  }
}

@media screen and (-ms-high-contrast: black-on-white) {
  .light.high-contrast;
}

@media screen and (-ms-high-contrast: white-on-black) {
  .dark.high-contrast;
}

.light.high-contrast {
  .hc(@highcontrast-light-bg, @highcontrast-light-fg);
}

.dark.high-contrast {
  .hc(@highcontrast-dark-bg, @highcontrast-dark-fg);
}

.hc(@bg, @fg) {
  .fxc-monitorchart-legend {
    fill: @fg;
  }

  .fxc-monitorchart-watermark {
    background-color: @bg;
    border: 1px solid @fg;
    opacity: 1;

    .fxc-monitorchart-watermark-text {
      color: @fg;
    }
  }

  .fxc-monitorchart-static-threshold {
    stroke: @fg;
  }

  .fxc-monitorchart-static-threshold-pointer {
    fill: @fg;
  }

  .fxc-monitorchart-minor {
    .fxc-monitorchart-tick-line {
      stroke: @fg;
    }

    .fxc-monitorchart-tick-line-nodata {
      stroke: @fg;
    }
  }

  .fxc-monitorchart-axis {
    .fxc-monitorchart-tick-path {
      stroke: @fg;
    }

    .fxc-monitorchart-tick-text {
      fill: @fg;
    }
  }

  .fxc-monitorchart-temp-tick {
    fill: @fg;
  }
}
