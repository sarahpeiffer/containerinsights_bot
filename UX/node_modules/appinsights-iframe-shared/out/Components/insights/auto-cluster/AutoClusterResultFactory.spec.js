import { AutoClusterResultTestUtils } from './AutoClusterResultTestUtils.spec';
import { AutoClusterResultFactory } from './AutoClusterResultFactory';
describe('AutoClusterResultFactory', function () {
    describe('create', function () {
        it('should return autocluster result', function () {
            var rawEvent = AutoClusterResultTestUtils.getRawAutoClusterResult();
            var expectedResult = AutoClusterResultTestUtils.getAutoClusterResult();
            var result = AutoClusterResultFactory.create(rawEvent);
            expect(result).not.toBe(null);
            expect(result.id).toEqual(expectedResult.id);
            expect(result.percent).toEqual(expectedResult.percent);
            expect(result.count).toEqual(expectedResult.count);
            expect(result.dimensions['resultCode']).toEqual(expectedResult.dimensions['resultCode']);
            expect(result.dimensions['client_CountryOrRegion']).toEqual(expectedResult.dimensions['client_CountryOrRegion']);
            expect(result.dimensions['client_City']).not.toBeDefined();
            expect(result.dimensions['client_StateOrProvince']).not.toBeDefined();
            expect(result.dimensions['client_OS']).not.toBeDefined();
            expect(Object.keys(result.dimensions).length).toEqual(2);
        });
        it('should throw error in case of unexpected query result (dimensions)', function () {
            var rawEvent = AutoClusterResultTestUtils.getRawAutoClusterResult();
            var rawEventWithoutDimensions = Object.assign({}, { Count: rawEvent.Count, Percent: rawEvent.Percent, SegmentId: rawEvent.SegmentId });
            var result;
            result = AutoClusterResultFactory.create(rawEventWithoutDimensions);
            expect(result).toBeNull();
        });
    });
});
//# sourceMappingURL=AutoClusterResultFactory.spec.js.map