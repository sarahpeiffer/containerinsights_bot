import { NormalizeDependency } from './Normalizer';
describe('NormalizeDependency', function () {
    it('should properly format http', function () {
        var info = NormalizeDependency('http', 'GET /', 'example.com');
        expect(info.type).toBe('HTTP');
        expect(info.server).toBe('example.com');
        expect(info.operation).toBe('GET /');
    });
    it('should properly format http 2', function () {
        var info = NormalizeDependency('http', 'GET https://example.com/', 'example.com');
        expect(info.type).toBe('HTTP');
        expect(info.server).toBe('example.com');
        expect(info.operation).toBe('GET /');
    });
    it('should properly format sql', function () {
        var info = NormalizeDependency('SQL', 'SQL: tcp:fabrikamxyz.database.windowss.net,1433 | FabrikamlSQL', 'tcp:fabrikamxyz.database.windowss.net,1433 | FabrikamlSQL');
        expect(info.type).toBe('SQL');
        expect(info.server).toBe('fabrikamxyz.database.windowss.net');
        expect(info.operation).toBe('FabrikamlSQL');
    });
    it('should properly format sql with no SQL in name', function () {
        var info = NormalizeDependency('SQL', 'FabrikamlSQL', 'tcp:fabrikamxyz.database.windowss.net,1433 | FabrikamlSQL');
        expect(info.type).toBe('SQL');
        expect(info.server).toBe('fabrikamxyz.database.windowss.net');
        expect(info.operation).toBe('FabrikamlSQL');
    });
    it('should properly format sql with target in name', function () {
        var info = NormalizeDependency('SQL', 'FabrikamlSQL', 'fabrikamxyz.database.windowss.net');
        expect(info.type).toBe('SQL');
        expect(info.server).toBe('fabrikamxyz.database.windowss.net');
        expect(info.operation).toBe('FabrikamlSQL');
    });
    it('should properly format azure sql', function () {
        var info = NormalizeDependency('SQL', 'SQL: tcp:fabrikamxyz.database.windows.net,1433 | FabrikamlSQL', 'tcp:fabrikamxyz.database.windows.net,1433 | FabrikamlSQL');
        expect(info.type).toBe('AZURE SQL');
        expect(info.server).toBe('fabrikamxyz');
        expect(info.operation).toBe('FabrikamlSQL');
    });
    it('should properly format azure blob', function () {
        var info = NormalizeDependency('AZURE BLOB', 'PUT fabrikamaccount', 'fabrikamaccount.blob.core.windows.net');
        expect(info.type).toBe('AZURE BLOB');
        expect(info.server).toBe('fabrikamaccount');
        expect(info.operation).toBe('PUT fabrikamaccount');
    });
    it('should properly format azure documentdb', function () {
        var info = NormalizeDependency('AZURE DOCUMENTDB', 'Query documents', 'fabrikam.documents.azure.com');
        expect(info.type).toBe('AZURE DOCUMENTDB');
        expect(info.server).toBe('fabrikam');
        expect(info.operation).toBe('Query documents');
    });
    it('should properly format azure redis cache', function () {
        var info = NormalizeDependency('REDIS', 'get', 'fabrikam.redis.cache.windows.net:6380');
        expect(info.type).toBe('REDIS');
        expect(info.server).toBe('fabrikam');
        expect(info.operation).toBe('get');
    });
    it('should properly format azure service bus', function () {
        var info = NormalizeDependency('AZURE SERVICE BUS', 'get', 'sb://fabrikam.servicebus.windows.net/ | queue');
        expect(info.type).toBe('AZURE SERVICE BUS');
        expect(info.server).toBe('fabrikam');
        expect(info.operation).toBe('queue');
        info = NormalizeDependency('AZURE SERVICE BUS', 'get', 'fabrikam.servicebus.windows.net/ | queue');
        expect(info.type).toBe('AZURE SERVICE BUS');
        expect(info.server).toBe('fabrikam');
        expect(info.operation).toBe('queue');
        info = NormalizeDependency('AZURE SERVICE BUS', 'get', 'sb://fabrikam.servicebus.windows.net/');
        expect(info.type).toBe('AZURE SERVICE BUS');
        expect(info.server).toBe('fabrikam');
        expect(info.operation).toBe('get');
    });
    it('should properly format azure iot hub', function () {
        var info = NormalizeDependency('AZURE IOT HUB', 'POST /devices/test/messages/events', 'fabrikam.azure-devices.net');
        expect(info.type).toBe('AZURE IOT HUB');
        expect(info.server).toBe('fabrikam');
        expect(info.operation).toBe('POST /devices/test/messages/events');
    });
    it('should properly format azure service bus', function () {
        var info = NormalizeDependency('AZURE EVENT HUBS', 'get', 'sb://fabrikam.servicebus.windows.net/ | queue');
        expect(info.type).toBe('AZURE EVENT HUBS');
        expect(info.server).toBe('fabrikam');
        expect(info.operation).toBe('queue');
        info = NormalizeDependency('AZURE EVENT HUBS', 'get', 'fabrikam.servicebus.windows.net/ | queue');
        expect(info.type).toBe('AZURE EVENT HUBS');
        expect(info.server).toBe('fabrikam');
        expect(info.operation).toBe('queue');
        info = NormalizeDependency('AZURE EVENT HUBS', 'get', 'sb://fabrikam.servicebus.windows.net/');
        expect(info.type).toBe('AZURE EVENT HUBS');
        expect(info.server).toBe('fabrikam');
        expect(info.operation).toBe('get');
    });
});
//# sourceMappingURL=Normalizer.spec.js.map